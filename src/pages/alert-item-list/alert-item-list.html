<ion-header>
	<ion-navbar color="dark">
		<button ion-button start menuToggle>
			<ion-icon name="menu"></ion-icon>
		</button>
		<ion-title>
			{{ 'item_list.alert.title' | translate }}
		</ion-title>
		<ion-buttons right>
			<button ion-button clear (click)="searchbar.show()">
				<ion-icon name="search"></ion-icon>
			</button>
			<button ion-button clear (click)="openMap()">
				<ion-icon name="map"></ion-icon>
			</button>
		</ion-buttons>
	</ion-navbar>
	<ion-searchbar-wrapper #searchbar
		color="dark"
		(ionInput)="filterItems($event)">
	</ion-searchbar-wrapper>
</ion-header>

<ion-content>
	<ion-refresher (ionRefresh)="doRefresh($event)">
		<ion-refresher-content
			pullingIcon="arrow-dropdown"
			refreshingSpinner="circles">
		</ion-refresher-content>
	</ion-refresher>
	<div>
		<ion-item-divider color="dark" *ngIf="items.length < 1">
			<h2>{{ 'item_list.no_items' | translate }}</h2>
		</ion-item-divider>
		<ion-list>
			<button ion-item *ngFor="let item of items"
				(click)="itemTapped($event, item)">
				<ion-thumbnail item-left>
					<div *ngIf="(covers[item.$key] | async)">
						<img class="fit-thumbnail" [src]="(covers[item.$key] | async)?.image">
					</div>
				</ion-thumbnail>
				<ion-badge item-left [color]="item.type === 'lost' ? 'danger' : 'secondary'">
					{{item.type === 'lost' ? 'L' : 'F'}}
				</ion-badge>
				<h2>{{ item.name }}</h2>
				<p>{{ distances[item.$key] | normalizeDistance }}</p>
				<p>{{ item.createDate | amTimeAgo }}</p>
			</button>
		</ion-list>
	</div> <!-- list -->
</ion-content>

